cdc_payment_complete

{
    "Body":
        {
            "_id" : "cdc_payment_complete-banqi",
            "versao" : "1.0.0",
            "unidade_negocio" : "banqi",
            "projeto" : "vvdatalab-ingestion-azure",
            "descricao" : "Data Ingestion from Banqi.",
            "timestamp" : "2020-04-17T12:59:30.583Z",
            "origem" :                {
                    "tipo": "json",
                    "fonte": "banqi",
                    "caminho": "banqi",
                    "diretorio": "cdc_payment_complete"
                },
            "destino":
                {
                    "tipo":"json",
                    "caminho":"/raw/banqi",
                    "diretorio":"cdc_payment_complete",
                    "chave_tabela":"properties_payment_uuid",
                    "modo_gravacao":"append",
                    "quantidade":1,
                    "structType":
                        {
                            "fields":[
                                {"name":"messageId","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"receivedAt","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"sentAt","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"timestamp","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"originalTimestamp","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"event","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"userId","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_payment_uuid","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_vendor","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_account_uuid","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_contract_code","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_installment_number","dataType":"integer","nullable":true,"metadata":{}},
                                {"name":"properties_principal_value","dataType":"decimal","nullable":true,"metadata":{}}
                                    ]
                        }},
                    conteudo:[
                        {
                            _metadata:{nodeVersion:10.15.3},
                            channel:server,
                            context:{library:{name:analytics-node,version:3.3.0}},
                            event:cdc_payment_complete,
                            integrations:{},
                            messageId:node-0b0546b9beb87f27f8aeae98d560f35a-ac5a6928-c718-4135-8590-823e16b9ae8a,
                            originalTimestamp:2020-04-17T12:58:51.540Z,
                            projectId:kBWm9tedWr,
                            receivedAt:2020-04-17T12:58:58.053Z,
                            sentAt:2020-04-17T12:58:57.779Z,
                            timestamp:2020-04-17T12:58:51.814Z,
                            type:track,
                            userId:FOX_3779031e41dd4190b4f8adbd262d9e74,
                            version:2,
                            writeKey:lw7PAIw3Oe2hxg3sR98Bhz5KR9QSZNbW,
                            properties_account_uuid:3dce4f00-7e6c-11ea-b55b-e98a035c3a07,
                            properties_contract_code:21118200661670,
                            properties_installment_number:3,
                            properties_payment_uuid:d80fa2c5-d2b3-4950-9658-e687b7702ce3,
                            properties_principal_value:157.19,
                            properties_vendor:viavarejo,
                            properties_vv_authentication_code:0422X202004170000001170160038430
                            }
                            ],
                    lote:cdc_payment_complete-banqi}",
                "partition":"0",
                "offset":"17183528536",
                "sequenceNumber":37938,
                "enqueuedTime":"2020-04-17T12:59:30.573Z",
                "properties":{},
                "systemProperties":{}
                }



cdc_payment_complete

{
    "Body":
        {
            "_id" : "cdc_payment_complete-banqi",
            "versao" : "1.0.0",
            "unidade_negocio" : "banqi",
            "projeto" : "vvdatalab-ingestion-azure",
            "descricao" : "Data Ingestion from Banqi.",
            "timestamp" : "2020-04-17T12:59:30.583Z",
            "origem" :                {
                    "tipo": "json",
                    "fonte": "banqi",
                    "caminho": "banqi",
                    "diretorio": "cdc_payment_complete"
                },
            "destino":
                {
                    "tipo":"json",
                    "caminho":"/raw/banqi",
                    "diretorio":"cdc_payment_complete",
                    "chave_tabela":"properties_payment_uuid",
                    "modo_gravacao":"append",
                    "quantidade":1,
                    "particao":
                    [{
                        "de":{"nome_coluna":"conteudo.receivedAt","tipo":"timestamp"},
                        "para":{"year_partition":"yyyy","month_partition":"MM","day_partition":"dd"}
                    }],
                    "structType":
                        {
                            "fields":[
                                {"name":"messageId","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"receivedAt","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"sentAt","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"timestamp","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"originalTimestamp","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"event","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"userId","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_payment_uuid","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_vendor","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_account_uuid","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_contract_code","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_installment_number","dataType":"integer","nullable":true,"metadata":{}},
                                {"name":"properties_principal_value","dataType":"decimal","nullable":true,"metadata":{}}
                                    ]
                        }},
                    conteudo:[
                        {
                            _metadata:{nodeVersion:10.15.3},
                            channel:server,
                            context:{library:{name:analytics-node,version:3.3.0}},
                            event:cdc_payment_complete,
                            integrations:{},
                            messageId:node-0b0546b9beb87f27f8aeae98d560f35a-ac5a6928-c718-4135-8590-823e16b9ae8a,
                            originalTimestamp:2020-04-17T12:58:51.540Z,
                            projectId:kBWm9tedWr,
                            receivedAt:2020-04-17T12:58:58.053Z,
                            sentAt:2020-04-17T12:58:57.779Z,
                            timestamp:2020-04-17T12:58:51.814Z,
                            type:track,
                            userId:FOX_3779031e41dd4190b4f8adbd262d9e74,
                            version:2,
                            writeKey:lw7PAIw3Oe2hxg3sR98Bhz5KR9QSZNbW,
                            properties_account_uuid:3dce4f00-7e6c-11ea-b55b-e98a035c3a07,
                            properties_contract_code:21118200661670,
                            properties_installment_number:3,
                            properties_payment_uuid:d80fa2c5-d2b3-4950-9658-e687b7702ce3,
                            properties_principal_value:157.19,
                            properties_vendor:viavarejo,
                            properties_vv_authentication_code:0422X202004170000001170160038430
                            }
                            ],
                    lote:cdc_payment_complete-banqi}",
                "partition":"0",
                "offset":"17183528536",
                "sequenceNumber":37938,
                "enqueuedTime":"2020-04-17T12:59:30.573Z",
                "properties":{},
                "systemProperties":{}
                }



cdc_payment_complete

{
    "Body":
        {
            "_id" : "cdc_payment_complete-banqi",
            "versao" : "1.0.0",
            "unidade_negocio" : "banqi",
            "projeto" : "vvdatalab-ingestion-azure",
            "descricao" : "Data Ingestion from Banqi.",
            "timestamp" : "2020-04-17T12:59:30.583Z",
            "origem" :                {
                    "tipo": "json",
                    "fonte": "banqi",
                    "caminho": "banqi",
                    "diretorio": "cdc_payment_complete"
                },
            "destino":
                {
                    "tipo":"json",
                    "caminho":"/raw/banqi",
                    "diretorio":"cdc_payment_complete",
                    "chave_tabela":"properties_payment_uuid",
                    "modo_gravacao":"append",
                    "quantidade":1,
                    "particao":
                    [{
                        "de":{"nome_coluna":"conteudo.receivedAt","tipo":"timestamp"},
                        "para":{"year_partition":"yyyy","month_partition":"MM","day_partition":"dd"}
                    }],
                    "structType":
                        {
                            "fields":[
                                {"name":"messageId","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"receivedAt","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"sentAt","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"timestamp","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"originalTimestamp","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"event","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"userId","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_payment_uuid","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_vendor","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_account_uuid","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_contract_code","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_installment_number","dataType":"integer","nullable":true,"metadata":{}},
                                {"name":"properties_principal_value","dataType":"decimal","nullable":true,"metadata":{}}
                                    ]
                        }},
                    conteudo:[
                        {
                            _metadata:{nodeVersion:10.15.3},
                            channel:server,
                            context:{library:{name:analytics-node,version:3.3.0}},
                            event:cdc_payment_complete,
                            integrations:{},
                            messageId:node-0b0546b9beb87f27f8aeae98d560f35a-ac5a6928-c718-4135-8590-823e16b9ae8a,
                            originalTimestamp:2020-04-17T12:58:51.540Z,
                            projectId:kBWm9tedWr,
                            receivedAt:2020-04-17T12:58:58.053Z,
                            sentAt:2020-04-17T12:58:57.779Z,
                            timestamp:2020-04-17T12:58:51.814Z,
                            type:track,
                            userId:FOX_3779031e41dd4190b4f8adbd262d9e74,
                            version:2,
                            writeKey:lw7PAIw3Oe2hxg3sR98Bhz5KR9QSZNbW,
                            properties_account_uuid:3dce4f00-7e6c-11ea-b55b-e98a035c3a07,
                            properties_contract_code:21118200661670,
                            properties_installment_number:3,
                            properties_payment_uuid:d80fa2c5-d2b3-4950-9658-e687b7702ce3,
                            properties_principal_value:157.19,
                            properties_vendor:viavarejo,
                            properties_vv_authentication_code:0422X202004170000001170160038430
                            }
                            ],
                    lote:cdc_payment_complete-banqi}",
                "partition":"0",
                "offset":"17183528536",
                "sequenceNumber":37938,
                "enqueuedTime":"2020-04-17T12:59:30.573Z",
                "properties":{},
                "systemProperties":{}
                }

                cdc_payment_complete

cdc_payment_complete partition
"{
    "Body":
        {
            "_id" : "cdc_payment_complete-banqi",
            "versao" : "1.0.0",
            "unidade_negocio" : "banqi",
            "projeto" : "vvdatalab-ingestion-azure",
            "descricao" : "Data Ingestion from Banqi.",
            "timestamp" : "2020-04-17T12:59:30.583Z",
            "origem" :                {
                    "tipo": "json",
                    "fonte": "banqi",
                    "caminho": "banqi",
                    "diretorio": "cdc_payment_complete"
                },
            "destino":
                {
                    "tipo":"json",
                    "caminho":"/raw/banqi",
                    "diretorio":"cdc_payment_complete",
                    "chave_tabela":"properties_payment_uuid",
                    "modo_gravacao":"append",
                    "quantidade":1,
                    "particao":
                    [{
                        "de":{"nome_coluna":"conteudo.receivedAt","tipo":"timestamp"},
                        "para":{"year_partition":"yyyy","month_partition":"MM","day_partition":"dd"}
                    }],
                    "structType":
                        {
                            "fields":[
                                {"name":"messageId","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"receivedAt","dataType":"timestamp","nullable":true,"metadata":{}},
                                {"name":"sentAt","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"timestamp","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"originalTimestamp","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"event","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"userId","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_payment_uuid","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_vendor","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_account_uuid","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_contract_code","dataType":"string","nullable":true,"metadata":{}},
                                {"name":"properties_installment_number","dataType":"integer","nullable":true,"metadata":{}},
                                {"name":"properties_principal_value","dataType":"decimal","nullable":true,"metadata":{}}
                                    ]
                        }},
                    conteudo:[
                        {
                            _metadata:{nodeVersion:10.15.3},
                            channel:server,
                            context:{library:{name:analytics-node,version:3.3.0}},
                            event:cdc_payment_complete,
                            integrations:{},
                            messageId:node-0b0546b9beb87f27f8aeae98d560f35a-ac5a6928-c718-4135-8590-823e16b9ae8a,
                            originalTimestamp:2020-04-17T12:58:51.540Z,
                            projectId:kBWm9tedWr,
                            receivedAt:2020-04-17T12:58:58.053Z,
                            sentAt:2020-04-17T12:58:57.779Z,
                            timestamp:2020-04-17T12:58:51.814Z,
                            type:track,
                            userId:FOX_3779031e41dd4190b4f8adbd262d9e74,
                            version:2,
                            writeKey:lw7PAIw3Oe2hxg3sR98Bhz5KR9QSZNbW,
                            properties_account_uuid:3dce4f00-7e6c-11ea-b55b-e98a035c3a07,
                            properties_contract_code:21118200661670,
                            properties_installment_number:3,
                            properties_payment_uuid:d80fa2c5-d2b3-4950-9658-e687b7702ce3,
                            properties_principal_value:157.19,
                            properties_vendor:viavarejo,
                            properties_vv_authentication_code:0422X202004170000001170160038430
                            }
                            ],
                    lote:cdc_payment_complete-banqi}",
                "partition":"0",
                "offset":"17183528536",
                "sequenceNumber":37938,
                "enqueuedTime":"2020-04-17T12:59:30.573Z",
                "properties":{},
                "systemProperties":{}
                }

cdc_payment_error

{"Body":
    "{
        _id:cdc_payment_error-banqi,
        versao:1.0.0,
        unidade_negocio:banqi,
        projeto:vvdatalab-ingestion-azure,
        descricao:Data Ingestion from Banqi.,
        timestamp:2020-04-17T10:44:42.836Z,
        origem:{
            tipo:json,
            fonte:banqi,
            caminho:banqi,
            diretorio:cdc_payment_error
        },
        destino:{
            tipo:json,
            caminho:/raw/banqi,
            diretorio:cdc_payment_error,
            chave_tabela:properties_primary_key,
            modo_gravacao:append,
            quantidade:1,
            structType:{
                fields:[
                    {name:messageId,dataType:string,nullable:true,metadata:{}},
                    {name:receivedAt,dataType:string,nullable:true,metadata:{}},
                    {name:sentAt,dataType:string,nullable:true,metadata:{}},
                    {name:timestamp,dataType:string,nullable:true,metadata:{}},
                    {name:originalTimestamp,dataType:string,nullable:true,metadata:{}},
                    {name:event,dataType:string,nullable:true,metadata:{}},
                    {name:userId,dataType:string,nullable:true,metadata:{}},
                    {name:properties_installment_number,dataType:integer,nullable:true,metadata:{}},
                    {name:properties_contract_code,dataType:string,nullable:true,metadata:{}},
                    {name:properties_user_id,dataType:string,nullable:true,metadata:{}},
                    {name:properties_vendor,dataType:string,nullable:true,metadata:{}},
                    {name:properties_error,dataType:string,nullable:true,metadata:{}},
                    {name:properties_principal_value,dataType:decimal,nullable:true,metadata:{}},
                    {name:properties_primary_key,dataType:string,nullable:true,metadata:{}}]}},
            conteudo:[
                {
                    _metadata:{nodeVersion:10.15.3},
                    channel:server,
                    context:{library:{name:analytics-node,version:3.3.0}},
                    event:cdc_payment_error,
                    integrations:{},
                    messageId:node-6c0714d596e6f564dd4470d6ac158c4f-6bfc7d59-b7d3-47d8-8bf1-8f778374a1db,
                    originalTimestamp:2020-04-17T10:44:21.797Z,
                    projectId:kBWm9tedWr,
                    receivedAt:2020-04-17T10:44:28.199Z,
                    sentAt:2020-04-17T10:44:27.924Z,
                    timestamp:2020-04-17T10:44:22.072Z,
                    type:track,
                    userId:FOX_342fab43c0664493a603cf117a49b7ef,
                    version:2,
                    writeKey:lw7PAIw3Oe2hxg3sR98Bhz5KR9QSZNbW,
                    properties_account_uuid:24b46ed0-7a6d-11ea-9e97-ad5b07abe551,
                    properties_contract_code:21121001449277,
                    properties_error:Unexpected response payload from VV API,
                    properties_installment_number:1,
                    properties_payment_uuid:60e287ea-b127-4a4a-8a38-983ac26ed6cc,
                    properties_principal_value:232.92,
                    properties_vendor:viavarejo,
                    properties_vv_authentication_code:,
                    primary_key:60e287ea-b127-4a4a-8a38-983ac26ed6ccundefined}],
            lote:cdc_payment_error-banqi}","partition":"0","offset":"17182964176","sequenceNumber":37700,"enqueuedTime":"2020-04-17T10:44:42.846Z","properties":{},"systemProperties":{}}
                


wallet_spend_money


{"Body":"{
    _id:wallet_spend_money-banqi,
    versao:1.0.0,
    unidade_negocio:banqi,
    projeto:vvdatalab-ingestion-azure,
    descricao:Data Ingestion from Banqi.,
    timestamp:2020-04-17T10:33:53.223Z,
    origem:{
        tipo:json,
        fonte:banqi,
        caminho:banqi,
        diretorio:wallet_spend_money
        },
    destino:{
        tipo:json,
        caminho:/raw/banqi,
        diretorio:wallet_spend_money,
        chave_tabela:properties_transaction_uuid,
        modo_gravacao:append,
        quantidade:1,
        structType:{
            fields:[
                {name:messageId,dataType:string,nullable:true,metadata:{}},
                {name:receivedAt,dataType:string,nullable:true,metadata:{}},
                {name:sentAt,dataType:string,nullable:true,metadata:{}},
                {name:timestamp,dataType:string,nullable:true,metadata:{}},
                {name:originalTimestamp,dataType:string,nullable:true,metadata:{}},
                {name:event,dataType:string,nullable:true,metadata:{}},
                {name:userId,dataType:string,nullable:true,metadata:{}},
                {name:properties_product_name,dataType:string,nullable:true,metadata:{}},
                {name:properties_vendor,dataType:string,nullable:true,metadata:{}},
                {name:properties_account_uuid,dataType:string,nullable:true,metadata:{}},
                {name:properties_amount,dataType:decimal,nullable:true,metadata:{}}
                ]}},
        conteudo:[
            {_metadata:{nodeVersion:10.15.3},
            channel:server,
            context:{library:{name:analytics-node,version:3.3.0}},
            event:wallet_spend_money,
            integrations:{},
            messageId:node-c5111936ee8976aec6c175356ddf9dbb-f694f22f-f72a-452e-993e-0b38d3a2dfd4,
            originalTimestamp:2020-04-17T10:32:43.554Z,
            projectId:kBWm9tedWr,
            receivedAt:2020-04-17T10:32:53.637Z,
            sentAt:2020-04-17T10:32:53.339Z,
            timestamp:2020-04-17T10:32:43.852Z,
            type:track,
            userId:FOX_dc0003b102c8467a9158c60b90d6fba8,
            version:2,
            writeKey:lw7PAIw3Oe2hxg3sR98Bhz5KR9QSZNbW,
            properties_account_uuid:09277a80-3bd0-11ea-8a09-7b0de8c1d94a,
            properties_amount:184.47,
            properties_product_name:cdc_boleto,
            properties_source:analytics backfill,
            properties_transaction_uuid:6c9e55d0-81e2-4a27-b456-aa33e334956e,
            properties_transfer_type:cdc_payment,
            properties_vendor:viavarejo}],
        lote:wallet_spend_money-banqi}","partition":"0","offset":"17182933040","sequenceNumber":37687,"enqueuedTime":"2020-04-17T10:33:53.287Z","properties":{},"systemProperties":{}}


wallet_direct_transfer

{"Body":
    "{
        _id:wallet_direct_transfer-banqi,
        versao:1.0.0,
        unidade_negocio:banqi,
        projeto:vvdatalab-ingestion-azure,
        descricao:Data Ingestion from Banqi.,
        timestamp:2020-04-17T00:46:02.913Z,
        origem:{
            tipo:json,
            fonte:banqi,
            caminho:banqi,
            diretorio:wallet_direct_transfer
            },
        destino:{
            tipo:json,
            caminho:/raw/banqi,
            diretorio:wallet_direct_transfer,
            chave_tabela:properties_primary_key,
            modo_gravacao:append,
            quantidade:1,
            structType:{
                fields:[
                    {name:messageId,dataType:string,nullable:true,metadata:{}},
                    {name:receivedAt,dataType:string,nullable:true,metadata:{}},
                    {name:sentAt,dataType:string,nullable:true,metadata:{}},
                    {name:timestamp,dataType:string,nullable:true,metadata:{}},
                    {name:originalTimestamp,dataType:string,nullable:true,metadata:{}},
                    {name:event,dataType:string,nullable:true,metadata:{}},
                    {name:userId,dataType:string,nullable:true,metadata:{}},
                    {name:properties_amount,dataType:decimal,nullable:true,metadata:{}},
                    {name:properties_transfer_type,dataType:send,nullable:true,metadata:{}},
                    {name:properties_source_account_uuid,dataType:string,nullable:true,metadata:{}},
                    {name:properties_destination_account_uuid,dataType:string,nullable:true,metadata:{}},
                    {name:properties_primary_key,dataType:string,nullable:true,metadata:{}}]}
                    },
            conteudo:[
                {
                    _metadata:{nodeVersion:10.15.3},
                    channel:server,
                    context:{library:{name:analytics-node,version:3.3.0}},
                    event:wallet_direct_transfer,
                    integrations:{},
                    messageId:node-26652616daa16fa38c8da59da5195411-f18aebbd-f2eb-4a9c-826c-94516ea98eb5,
                    originalTimestamp:2020-04-17T00:45:40.107Z,
                    projectId:kBWm9tedWr,
                    receivedAt:2020-04-17T00:45:40.968Z,
                    sentAt:2020-04-17T00:45:40.679Z,
                    timestamp:2020-04-17T00:45:40.396Z,
                    type:track,
                    userId:FOX_67276d83eab84f88ab87a1c189796ca9,
                    version:2,
                    writeKey:lw7PAIw3Oe2hxg3sR98Bhz5KR9QSZNbW,
                    properties_amount:2000,
                    properties_destination_account_uuid:ac683310-232a-11ea-bfca-19cf9659289e,
                    properties_source:analytics backfill,
                    properties_source_account_uuid:08ae4320-36ff-11ea-88b7-433865e3027d,
                    properties_transfer_type:send,
                    primary_key:08ae4320-36ff-11ea-88b7-433865e3027dundefined}],
                    lote:wallet_direct_transfer-banqi}","partition":"0","offset":"17182589128","sequenceNumber":37546,"enqueuedTime":"2020-04-17T00:46:02.917Z","properties":{},"systemProperties":{}}
